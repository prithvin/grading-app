<!DOCTYPE html>
<html >
	<head>
		<meta charset="UTF-8">
	</head>

	<body>

		<html>
	<head>
		<!-- Material Design Lite -->
		<script src="https://storage.googleapis.com/code.getmdl.io/1.0.4/material.min.js"></script>
          <link rel="stylesheet" href="https://storage.googleapis.com/code.getmdl.io/1.0.4/material.indigo-pink.min.css">
          <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
          <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
          <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">

          <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">

          <link rel="stylesheet" href="alertboxes.css">
		<style>
		.addclasscard.mdl-card {
	width: 320px;
	height: 320px;
}
.addclasscard > .mdl-card__title {
	color: #fff;
	background:
		url('https://upload.wikimedia.org/wikipedia/commons/0/0f/ClassroomMoveableFurnitureITESMCCM_02.JPG') bottom right 15% no-repeat #46B6AC;
		background-size:100%;
}
				.activebuttonportal {
										background-color: rgba(0, 0, 0, 0.19);
							 }
</style>
	</head>
	<body>
		<!-- Always shows a header, even in smaller screens. -->
		<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
			<header class="mdl-layout__header">
				<div class="mdl-layout__header-row">
					<!-- Title -->
					<span class="mdl-layout-title" id="classroomname"></span>
					<!-- Add spacer, to align navigation to the right -->
					<div class="mdl-layout-spacer"></div>
					<!-- Navigation. We hide it in small screens. -->
					<nav class="mdl-navigation ">
						<a class="mdl-navigation__link " href="">Classroom</a>
						<a class="mdl-navigation__link" href="">My Files</a>
						<a class="mdl-navigation__link activebuttonportal" href="">Assignments</a>
					</nav>
				</div>
			</header>
			<div class="mdl-layout__drawer">
				<span class="mdl-layout-title">My Classes</span>
				<nav class="mdl-navigation">
					<div id="myclasslist"></div>
					 <hr>
					<a class="mdl-navigation__link"  style="cursor:pointer;" id="openaddclass">Add Class</a>
				</nav>
			</div>
			    <main  style="overflow:visible! IMPORTANT;height:100%; !IMPORTANT" class="mdl-layout__content">
                    <div  style="height:100%; !IMPORTANT" class="page-content">
                         <div id="showBlockPage" style="display:none;position:absolute;background-color:white;padding-top:50px;text-align:center;height:100%;width:100%;"><p style="font-size:60px;line-height:70px;padding:50px;">Select a Classroom from the dropdown on the left</p></div>

                         <div class="mdl-layout  mdl-layout--fixed-drawer" style="display:inline-block">
                              <div class="mdl-layout__drawer mdl-layout--fixed-drawer" style="overflow: visible;max-height:none;height:initial;min-height:100%;">
                                   <span class="mdl-layout-title">
                                        <button id="selectprogrammenu" class="mdl-button mdl-js-button">Select Program</button>
                                        <ul id="getprogramselectlist" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect"for="selectprogrammenu">
                                        </ul>
                                       
                                   </span>
                                    <span style="text-align:center;"id="duedate"></span>
                                   <nav class="mdl-navigation"style="overflow-y:scroll;" id="submissionsforprogram"></nav>
                              </div>
                              <main style="height:100% !IMPORTANT;overflow:visible !IMPORTANT;padding:10px;width: calc(100% - 270px) !IMPORTANT;" class="mdl-layout__content" >
                              <div style="width:100%;">
                                   <button id="programchooser" class="mdl-button mdl-js-button mdl-button--primary" disabled>Choose File</button>
                                   <ul id="programfilechooser" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="programchooser"></ul>
                                   <button id="revisionchooser" class="mdl-button mdl-js-button mdl-button--primary" disabled>View Revision</button>
                                   <ul id="revisionfilechooser" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="revisionchooser"></ul>
                                   <b> File Name: </b><span id="filename" style="padding-right:10px"></span>
                                   <b>  Directory:</b> <span id="directory" style="padding-right:10px"></span>
                                   <b> Default Revision: </b><span id="defaultrevision" style="padding-right:10px"></span>
                                   <b> Current Revision:</b> <span id="currentrevision" style="padding-right:10px"></span>
                              </div>
                              <div id="editor" style="height:40%;"></div>
                              <br>
                              <button id="runnergetter" class="mdl-button mdl-js-button mdl-button--primary" disabled>View Compilers</button>
                              <ul id="runnergettermenu" class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="runnergetter"></ul>
                              <div style="position:fixed;bottom:0;left:250px;width:calc(100% - 270px);background-color: rgba(255, 255, 255, 0.86);z-index: 5000;" class="pure-form">
                                   <hr style="margin-top:0;">
                                   Student Comments:<span id="studentcomments"></span><br>
                                   Teacher Comments:<span id="teachercomments"></span><br>
                                   Grade:<span id="grade"></span><br>
                              </div>
                               <div id="newprogrambox" class="mdl-card__supporting-text pure-form">     
                                   <div id="loadingbox"  style="display:none;" class="mdl-progress mdl-js-progress mdl-progress__indeterminate"> Loading....  </div>

                                   <div id="virtualmachinediv" style="display:none;">
                                        <h4 style="margin-bottom:0px !IMPORTANT;">Virtual Machine</h4>
                                        Enter the code that you would like to run before compilation...<br>Assume that the command line starts on the FileSystem directory
                                        <textarea style="font-size:12px;width:100%;border-radius:10px 10px 0px 0px;" placeholder="javac test.java && java test" type="text" rows= "3" id="inputvmtext" ></textarea>
                                        <button id="runvirtualmachine" style="border-radius:0px 0px 10px 10px;width:100%;" class="pure-button pure-button-primary">Run Virtual Machine Test</button>
                                        <button id="savevirtualmachine" style="width:100%;margin-top:5px;border-radius:10px;background-color:#019875" class="pure-button pure-button-primary">Save Test As...</button>
                                        <iframe id="runvmhere" style="width:100%;height:700px;"></iframe>
                                   </div>

                                   <br><br>
                                   <div id="regcompilediv" style="display:none;">
                                        <h4 style="margin-bottom:0px !IMPORTANT;">Custom Input</h4>
                                        Enter any commands that you need to compile all required files (assuming starting directory is one layer above FileSystem folder (must do cd FileSystem)) and go into the directory of the .java file you would like to run.
                                        <textarea style="font-size:12px;width:100%;border-radius:10px 10px 0px 0px;" placeholder="cd FileSystem" type="text" rows= "3" id="inputspecinputcomptext" ></textarea>
                                        <input  style="width:100%;border-radius:0px" id="inputspecinputfilename" placeholder=".Java File Name (Don't include .java)" style="font-size:12px;">
                                        <select class="inputcompstyle" id="selectinputtype">
                                             <option>Advanced Input</option>
                                             <option>Basic Input</option>
                                        </select>
                                        <table style="width:100%;font-size:12px;" class="pure-table" >
                                             <thead>
                                                  <tr>
                                                       <th>Text to Find</th>
                                                       <th>Text to Return</th>
                                                       <th>Use Index Of</th>
                                                       <th># Times Repeat</th>
                                                  </tr>
                                             </thead>
                                             <tbody id="tabledataspinput"></tbody>
                                        </table>
                                        <button id="addfieldforcompileinput" style="border-radius:0px;width:100%;background-color:#4183D7;" class="pure-button pure-button-primary">Add Field</button>
                                        <button id="testforinput" style="background-color:#2C3E50;border-radius:0px 0px 10px 10px;width:100%;" class="pure-button pure-button-primary">Test For Input</button>
                                        <button id="savecompileinput" style="width:100%;margin-top:5px;border-radius:10px;background-color:#019875" class="pure-button pure-button-primary">Save Test As...</button>
                                        <pre id="datadisplayhere"></pre>
                                   </div>
                              </div>
                         </div>
                    </div>
               </main>
		</div>
	</body>
	<alertboxes>
	<div id="findclass" class="bigbox"  style="z-index:100000;">


<div class="addclasscard backgroundalert mdl-card mdl-shadow--2dp">
	<div class="mdl-card__title mdl-card--expand">
		<h2 class="mdl-card__title-text">Add Class</h2>
	</div>
	<div class="mdl-card__supporting-text">
		Enter the Class ID Below:
		<br><span id="errorenrollclass"></span>
		<form id="enrollinclassbutton">
	<div class="mdl-textfield mdl-js-textfield">
		<input class="mdl-textfield__input" type="text" id="classidinptu" />
		<label class="mdl-textfield__label" for="classidinput">Class ID</label>
	</div>
	</div>

	<div class="mdl-card__actions mdl-card--border">
		<button type="submit"  class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
			Enroll
		</button>
		</form>
		 <a class="cancelbutton mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
			Cancel
		</a>
	</div>
</div>
		</div>

		<div id="loginbox" class="bigbox">
			<div id="loginshakebox" class="demo-card-square mdl-card mdl-shadow--2dp backgroundalert" >
				<div class="mainbackground mdl-card__title mdl-card--expand"><h2 class="mdl-card__title-text" >Please Login</h2></div>
				<div class="mdl-card__supporting-text">
									<form id="myloginform">
					<div class="mdl-textfield mdl-js-textfield">

						<input class="mdl-textfield__input" type="text" id="usernamefield" />
						<label class="mdl-textfield__label" for="usernamefield">Username</label>
							
					</div>
					<div class="mdl-textfield mdl-js-textfield">

							<input class="mdl-textfield__input" type="password" id="passwordfield" />
						<label class="mdl-textfield__label" for="passwordfield">Password</label>
							
					</div>
	
				</div>
				<div class="mdl-card__actions mdl-card--border">
					<button id="login" type="submit" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">Login</button>

				</div>
									</form>
			</div>
		</div>

		<div id="errorbox" class="bigbox">
			<div class="demo-card-square mdl-card mdl-shadow--2dp backgroundalert" >
				<div class="mainbackground mdl-card__title mdl-card--expand"><h2 class="mdl-card__title-text" id="textprompt" ></h2></div>
				<div class="mdl-card__supporting-text" id="uploadalertboxtext"></div>
				<div class="mdl-card__actions mdl-card--border">
					<a id="uploadyes" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">Yes</a>
					<a id="uploadno" class="mdl-button  mdl-js-button mdl-js-ripple-effect">No</a>
				</div>
			</div>
		</div>

	</alertboxes>
</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>


		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
          <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
          <script src="//cdn.jsdelivr.net/ace/1.2.0/min/ace.js"></script>
          <script src="//cdn.jsdelivr.net/ace/1.2.0/min/mode-java.js"></script>
          <script src="//cdn.jsdelivr.net/ace/1.2.0/min/theme-xcode.js"></script>
          <script src="dashboard.js"></script>
          <script src="specialcompile.js"></script>
          <script>
          	function getAssignments() {
          		editor = ace.edit("editor");
               	editor.setTheme("ace/theme/xcode");
               	editor.getSession().setMode("ace/mode/java");
               	editor.setReadOnly(true);
               	$("#getprogramselectlist").html("Loading...");
               	 $.ajax({
                         type: "GET",
                         url: "http://104.131.135.237:3000/submissions/getprogramsbynameandid",
                         data: {ClassId: getQueryVariable("classroomid")},
                         success: function (response) {
						sadBoxError(response, function () {
							$("#getprogramselectlist").html("");
							var maindiv = $("#getprogramselectlist");
							for (var x = 0; x < response.length; x++) {
								var li = $("<li>").addClass("mdl-menu__item").html(response[x].Name).appendTo(maindiv);
								$(li).attr("data-id", response[x]._id).attr("data-date", response[x].DueDate)
								$(li).on("click", function (ev) {
									$("#selectprogrammenu").html($(this).html());
									$("#duedate").html("Due Date: " + getFormattedDate (new Date($(this).attr("data-date")), true));
									getProgramSubmissions($(this).attr("data-id"));
								});
							}
						});
                         },
                         xhrFields: {withCredentials: true},
                         error:function(){
                         console.log("ERROR");
                         }
                    });
          	}
          	
          	function getProgramSubmissions (programid) {
          		var maindiv = $("#submissionsforprogram").html("Loading...");
          		 $.ajax({
                         type: "GET",
                         url: "http://104.131.135.237:3000/submissions/studentsubmissionsforprogram",
                         data: {ClassId: getQueryVariable("classroomid"), ProgramId: programid},
                         success: function (response) {
						sadBoxError(response, function () {
							console.log(response);
							if (JSON.stringify(response) == "{}") {
								promptBox("Make some submissions for this program first!", "No Submissions Yet", "Ok", null, "https://upload.wikimedia.org/wikipedia/commons/thumb/0/01/February_calendar.jpg/1280px-February_calendar.jpg", function () {
										closePromptBox();
								});
							}
							else {
								var maindiv = $("#submissionsforprogram").html("");
								if (response.TeacherComments.substring(0,6) != "DRAFT:") {
									$("#teachercomments").html(response.TeacherComments);
									$("#grade").html(response.Grade);
								}
								$("#studentcomments").html(response.StudentComments);
								var entries = response.Entries;
								for (var x = 0;x < entries.length; x++) {
									$("<a>").addClass("mdl-navigation__link").html("Submission on " + getFormattedDate(new Date(entries[x].DateSubmitted))).appendTo(maindiv).css("padding", "16px 20px 16px 40px");
								}
							}
						});
                         },
                         xhrFields: {withCredentials: true},
                         error:function(){
                         	console.log("ERROR");
                         }
                    });
          		 
          	}

          	 Number.prototype.padLeft = function(base,chr){
                    var  len = (String(base || 10).length - String(this).length)+1;
                    return len > 0? new Array(len).join(chr || '0')+this : this;
               }
               function getFormattedDate (d, noseconds) {
                     return [(d.getMonth()+1).padLeft(),d.getDate().padLeft(),d.getFullYear()].join('/') + ' ' + formatAMPM(d, noseconds);
               }
               function formatAMPM(date, noseconds) {
                    var hours = date.getHours();
                    var minutes = date.getMinutes();
                    var ampm = hours >= 12 ? 'pm' : 'am';
                    hours = hours % 12;
                    hours = hours ? hours : 12; // the hour '0' should be '12'
                    minutes = minutes < 10 ? '0'+minutes : minutes;
                    if (noseconds) 
                    	return hours + ':' + minutes + " " + ampm;
                    var strTime = hours + ':' + minutes + ':' + date.getSeconds() + " " + ampm;
                    return strTime;
               }
          </script>


